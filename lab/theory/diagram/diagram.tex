\documentclass{standalone}

\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing,shapes,arrows,positioning,calc}

\begin{document}

\tikzstyle{Ahid} = [rectangle split, rectangle split horizontal, draw=blue, rectangle split parts=3, fill=blue!10, outer sep=1mm]
\tikzstyle{Avhid} = [rectangle split, rectangle split, draw=blue, rectangle split parts=3, fill=blue!10, outer sep=1mm]

\tikzstyle{Ghid} = [rectangle split, rectangle split horizontal, draw=blue, rectangle split parts=3, fill=blue!30, outer sep=1mm]
\tikzstyle{Gvhid} = [rectangle split, rectangle split, draw=blue, rectangle split parts=3, fill=blue!30, outer sep=1mm]

\tikzstyle{Bhid} = [draw=blue, outer sep=1mm, inner sep=0.17cm]

\tikzstyle{label} = [font=\small,node distance=0.03cm]
\tikzset{invisible/.style={minimum width=0mm,inner sep=0mm,outer sep=0mm}}

\small
\begin{tikzpicture}[node distance=0.1cm and 0.05cm,auto]

	% I have a cat
    \node [Ghid] (Mem11) {};
    \node [label,below=of Mem11] (Mem1label1) {\strut I};
    \node [invisible, above=0.1cm of Mem11] (aMem11) {};
    \node [Ghid,right=of Mem11] (Mem12) {};
    \node [label,below=of Mem12] (Mem1label2) {\strut have};
    \node [invisible, above=0.1cm of Mem12] (aMem12) {};
    \node [Ghid,right=of Mem12] (Mem13) {};
    \node [label,below=of Mem13] (Mem1label3) {\strut a};
    \node [invisible, above=0.1cm of Mem13] (aMem13) {};
    \node [Ghid,right=of Mem13] (Mem14) {};
    \node [label,below=of Mem14] (Mem1label4) {\strut cat};
    \node [invisible, above=0.1cm of Mem14] (aMem14) {};
    \node [Gvhid,right=1cm of aMem14] (Mem1) {};
    \node [invisible, right=0.1cm of Mem1] (anchorMem1) {};

	% I enjoy eating spaghetti
    \node [Ghid,below=of Mem1label1] (Mem21) {};
    \node [label,below=of Mem21] (Mem2label1) {\strut I};
    \node [invisible, above=0.1cm of Mem21] (aMem21) {};
    \node [Ghid,right=of Mem21] (Mem22) {};
    \node [label,below=of Mem22] (Mem2label2) {\strut enjoy};
    \node [invisible, above=0.1cm of Mem22] (aMem22) {};
    \node [Ghid,right=of Mem22] (Mem23) {};
    \node [label,below=of Mem23] (Mem2label3) {\strut eating};
    \node [invisible, above=0.1cm of Mem23] (aMem23) {};
    \node [Ghid,right=of Mem23] (Mem24) {};
    \node [label,below=of Mem24] (Mem2label4) {\strut spaghetti};
    \node [invisible, above=0.1cm of Mem24] (aMem24) {};
    \node [Gvhid,right=1cm of aMem24] (Mem2) {};
    \node [invisible, right=0.3cm of Mem2] (anchorMem2) {};

	% My job is research
    \node [Ghid,below=of Mem2label1] (Mem31) {};
    \node [label,below=of Mem31] (Mem3label1) {\strut My};
    \node [invisible, above=0.1cm of Mem31] (aMem31) {};
    \node [Ghid,right=of Mem31] (Mem32) {};
    \node [label,below=of Mem32] (Mem3label2) {\strut job};
    \node [invisible, above=0.1cm of Mem32] (aMem32) {};
    \node [Ghid,right=of Mem32] (Mem33) {};
    \node [label,below=of Mem33] (Mem3label3) {\strut is};
    \node [invisible, above=0.1cm of Mem33] (aMem33) {};
    \node [Ghid,right=of Mem33] (Mem34) {};
    \node [label,below=of Mem34] (Mem3label4) {\strut research};
    \node [invisible, above=0.1cm of Mem34] (aMem34) {};
    \node [Gvhid,right=1cm of aMem34] (Mem3) {};
    \node [invisible, right=0.1cm of Mem3] (anchorMem3) {};    

    % Encoder
    \node [Ahid,below=1.5cm of Mem3label1] (Enc1) {};
    \node [label,below=of Enc1] (Enc1label) {\strut Do};
    \node [Ahid,right=of Enc1] (Enc2) {};
    \node [label,below=of Enc2] (Enc2label) {\strut you};
    \node [Ahid,right=of Enc2] (Enc3) {};
    \node [label,below=of Enc3] (Enc3label) {\strut have};
    \node [Ahid,right=of Enc3] (Enc4) {};
    \node [label,below=of Enc4] (Enc4label) {\strut pets};
    \node [Ahid,right=of Enc4] (Enc5) {};
    \node [label,below=of Enc5] (Enc5label) {\strut ?};
    
    \node [Avhid,above=of Enc1] (Enc1h) {};
    \node [Avhid,above=of Enc2] (Enc2h) {};
    \node [Avhid,above=of Enc3] (Enc3h) {};
    \node [Avhid,above=of Enc4] (Enc4h) {};
    \node [Avhid,above=of Enc5] (Enc5h) {};

	% Decoder
	\node [Avhid,right=2cm of Mem3label4] (Dec1h) {};
	\node [Ahid,below=of Dec1h] (Dec1) {};
    \node [label,below=of Dec1] (Dec1label) {\strut $<$s$>$};
	\node [Ahid,right=of Dec1] (Dec2) {};
    \node [label,below=of Dec2] (Dec2label) {\strut Yes};
	\node [Ahid,right=of Dec2] (Dec3) {};
    \node [label,below=of Dec3] (Dec1label) {\strut ,};
	\node [Ahid,right=of Dec3] (Dec4) {};
    \node [label,below=of Dec4] (Dec1label) {\strut one};
	\node [Ahid,right=of Dec4] (Dec5) {};
    \node [label,below=of Dec5] (Dec5label) {\strut cat};
	\node [Avhid,above=of Dec2] (Dec2h) {};
	\node [Avhid,above=of Dec3] (Dec3h) {};
	\node [Avhid,above=of Dec4] (Dec4h) {};
	\node [Avhid,above=of Dec5] (Dec5h) {};

	% Attention
    \node [Bhid,above=0.5cm of Dec1h,fill=red!20] (Attn11) {};
    \node [Bhid,above=-0.1cm of Attn11,fill=red!20] (Attn12) {};
    \node [Bhid,above=-0.1cm of Attn12,fill=red!50] (Attn13) {};

    \node [Bhid,above=0.5cm of Dec2h,fill=red!25] (Attn21) {};
    \node [Bhid,above=-0.1cm of Attn21,fill=red!25] (Attn22) {};
    \node [Bhid,above=-0.1cm of Attn22,fill=red!50] (Attn23) {};

    \node [Bhid,above=0.5cm of Dec3h,fill=red!20] (Attn31) {};
    \node [Bhid,above=-0.1cm of Attn31,fill=red!20] (Attn32) {};
    \node [Bhid,above=-0.1cm of Attn32,fill=red!60] (Attn33) {};

    \node [Bhid,above=0.5cm of Dec4h,fill=red!10] (Attn41) {};
    \node [Bhid,above=-0.1cm of Attn41,fill=red!10] (Attn42) {};
    \node [Bhid,above=-0.1cm of Attn42,fill=red!80] (Attn43) {};

    \node [Bhid,above=0.5cm of Dec5h,fill=red!2] (Attn51) {};
    \node [Bhid,above=-0.1cm of Attn51,fill=red!2] (Attn52) {};
    \node [Bhid,above=-0.1cm of Attn52,fill=red!96] (Attn53) {};

  \path[-]
    (Mem11) edge node [right] {} (aMem11)
    (Mem12) edge node [right] {} (aMem12)
    (Mem13) edge node [right] {} (aMem13)
    (Mem14) edge node [right] {} (aMem14)

    (Mem21) edge node [right] {} (aMem21)
    (Mem22) edge node [right] {} (aMem22)
    (Mem23) edge node [right] {} (aMem23)
    (Mem24) edge node [right] {} (aMem24)
    
    (Mem31) edge node [right] {} (aMem31)
    (Mem32) edge node [right] {} (aMem32)
    (Mem33) edge node [right] {} (aMem33)
    (Mem34) edge node [right] {} (aMem34)
    ;
  \path[->]
    (aMem11) edge node [right] {} (Mem1)
    (aMem21) edge node [right] {} (Mem2)
    (aMem31) edge node [right] {} (Mem3)

    (Enc1) edge node [right] {} (Enc1h)
    (Enc2) edge node [right] {} (Enc2h)
    (Enc3) edge node [right] {} (Enc3h)
    (Enc4) edge node [right] {} (Enc4h)
    (Enc5) edge node [right] {} (Enc5h)
    
    (Enc1h) edge node [right] {} (Enc2h)
    (Enc2h) edge node [right] {} (Enc3h)
    (Enc3h) edge node [right] {} (Enc4h)
    (Enc4h) edge node [right] {} (Enc5h)

    (Enc5h) edge node [right] {} (Dec1h.west)

    (Dec1) edge node [right] {} (Dec1h)
    (Dec2) edge node [right] {} (Dec2h)
    (Dec3) edge node [right] {} (Dec3h)
    (Dec4) edge node [right] {} (Dec4h)
    (Dec5) edge node [right] {} (Dec5h)

    (Dec1h) edge node [right] {} (Dec2h)
    (Dec2h) edge node [right] {} (Dec3h)
    (Dec3h) edge node [right] {} (Dec4h)
    (Dec4h) edge node [right] {} (Dec5h)

    (Dec1h.north) edge[out=90,in=270] node {} (Dec2.south)
    (Dec2h.north) edge[out=90,in=270] node {} (Dec3.south)
    (Dec3h.north) edge[out=90,in=270] node {} (Dec4.south)
    (Dec4h.north) edge[out=90,in=270] node {} (Dec5.south)
    ;
  \draw [decoration={brace,amplitude=0.5em},decorate,thick,black]
    let \p1=(anchorMem1.north), \p2=(anchorMem3.south) in
    ({max(\x1,\x2)}, {\y1+0.1em}) -- node[right=0.6em] {} ({max(\x1,\x2)}, {\y2});
  \path[thick,dotted,->]
    (anchorMem2.east) edge[out=90,in=90] node {} (Attn13.north)
    (anchorMem2.east) edge[out=90,in=90] node {} (Attn23.north)
    (anchorMem2.east) edge[out=90,in=90] node {} (Attn33.north)
    (anchorMem2.east) edge[out=90,in=90] node {} (Attn43.north)
    (anchorMem2.east) edge[out=90,in=90] node {} (Attn53.north)
    
    (Dec1h.north) edge[out=270,in=180] node {} (Attn12.west)
    (Dec2h.north) edge[out=270,in=180] node {} (Attn22.west)
    (Dec3h.north) edge[out=270,in=180] node {} (Attn32.west)
    (Dec4h.north) edge[out=270,in=180] node {} (Attn42.west)
    (Dec5h.north) edge[out=270,in=180] node {} (Attn52.west)

    (Attn12.east) edge node [right] {} (Dec2h.west)
    (Attn22.east) edge node [right] {} (Dec3h.west)
    (Attn32.east) edge node [right] {} (Dec4h.west)
    (Attn42.east) edge node [right] {} (Dec5h.west)
    ;
\end{tikzpicture}

%  hid/.style 2 args={rectangle split, rectangle split horizontal, draw=#2, rectangle split parts=#1, fill=#2!10, outer sep=1mm, node distance=0.01cm}
  
\end{document}